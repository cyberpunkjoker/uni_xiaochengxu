(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/weight/weight"],{"01ed":function(t,e,n){"use strict";(function(t){n("b05c"),n("921b");i(n("66fd"));var e=i(n("7c43"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"7c43":function(t,e,n){"use strict";n.r(e);var i=n("efc2"),o=n("8495");for(var s in o)"default"!==s&&function(t){n.d(e,t,function(){return o[t]})}(s);n("b870");var u,a=n("f0c5"),r=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,"3bf3d6a8",null,!1,i["a"],u);e["default"]=r.exports},8495:function(t,e,n){"use strict";n.r(e);var i=n("9e16"),o=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=o.a},"9e16":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,i,o,s,u){try{var a=t[s](u),r=a.value}catch(c){return void n(c)}a.done?e(r):Promise.resolve(r).then(i,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var u=t.apply(e,n);function a(t){s(u,i,o,a,r,"next",t)}function r(t){s(u,i,o,a,r,"throw",t)}a(void 0)})}}n("3fb7"),n("b8ed");var a=function(){return n.e("components/uni-popup/uni-popup").then(n.bind(null,"7c30"))},r=function(){return n.e("pages/components/boxstyle/infobox").then(n.bind(null,"e861"))},c=function(){return n.e("pages/components/boxstyle/buttonstyle").then(n.bind(null,"e270"))},l={data:function(){return{image:["../../../static/img/weixuan.png","../../../static/img/xuanzhong.png"],formList:[1,2,3,4],selectedList:[],current:"",userInfo:"",id:"",goodsDetailList:[],newWeight:"",seconedWeight:"",name:"",num:"",size:"",weight:"",valueArr:[],longitude:null,latitude:null}},methods:{isTureNum:function(t){return/^\d+(\.\d{1,2})?$/.test(t)},changeNum:function(e){this.isTureNum(this.newWeight)||(this.newWeight=Number(e.detail.value).toFixed(2),t.showToast({title:"请输入两位以内的小数",icon:"none"})),e.detail.value>100&&(this.newWeight=99.99,t.showToast({title:"重量不能超过100吨",icon:"none"}))},changeNum2:function(){Number(this.seconedWeight)!==Number(this.newWeight)&&t.showToast({title:"请确保两次值相同",icon:"none"})},showTip:function(e){t.showModal({content:e})},chooseItem:function(t){this.selectedList=new Array(this.formList.length).fill(!1),this.$set(this.selectedList,t,!this.selectedList[t]),this.current=t,this.name=this.goodsDetailList[this.current].materialName,this.num=this.goodsDetailList[this.current].materialType,this.size=this.goodsDetailList[this.current].materialNum},open:function(t){console.log(t),this.$refs.popup.open()},toPages:function(e){Number(this.newWeight)===Number(this.seconedWeight)?(this.$set(this.valueArr,this.current,this.newWeight),this.$refs.popup.close()):t.showToast({title:"请确保两次输入同样的值",icon:"none"})},close:function(){this.$refs.popup.close()},getGoodsInfo:function(){var t=u(i.default.mark(function t(){var e,n;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={url:"/personal/driver/getDetails?orderId="+this.id,method:"post"},t.next=3,this.$http.httpTokenRequest(e);case 3:n=t.sent,this.goodsDetailList=n.data.result.materielDetails,console.log(this.goodsDetailList),this.valueArr=new Array(this.goodsDetailList.length).fill(""),this.userInfo=n.data.result;case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),submitBtn:function(){var e=u(i.default.mark(function e(){var n,o,s,u,a,r,c,l=this;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.showLoading({}),n=this.goodsDetailList.concat(),n.map(function(t,e){n[e].materialWeight=l.valueArr[e]}),null!==this.longitude){e.next=9;break}t.hideLoading(),this.reGetLocation(),t.showModal({content:"请开启定位服务"}),e.next=29;break;case 9:if(o=this.longitude+","+this.latitude,console.log(o),s={url:"/personal/driver/modTaskAppRecord",method:"post"},u={id:this.id,materielDetails:n,location:o},console.log(u),a=!1,r=!1,this.valueArr.map(function(t,e){""===t&&(a=!0),t>100&&(r=!0)}),!r){e.next=21;break}setTimeout(function(){t.hideLoading({}),t.showModal({content:"填写的物料重量请小于100吨"})},700),e.next=29;break;case 21:if(!a){e.next=25;break}setTimeout(function(){t.hideLoading({}),t.showModal({content:"请填写物料重量"})},700),e.next=29;break;case 25:return e.next=27,this.$http.httpTokenRequest(s,u);case 27:c=e.sent,0===c.data.code&&(t.hideLoading({}),t.navigateBack({delta:1}));case 29:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),reGetLocation:function(){t.showToast({title:"正在重新获取定位请稍后..",icon:"none"});var e=this;t.getLocation({type:"wgs84",success:function(n){console.log("当前位置的经度："+n.longitude),e.longitude=n.longitude,console.log("当前位置的纬度："+n.latitude),e.latitude=n.latitude,t.hideToast({})}})},getLocation:function(){var e=this;t.getLocation({type:"wgs84",success:function(t){console.log("当前位置的经度："+t.longitude),e.longitude=t.longitude,console.log("当前位置的纬度："+t.latitude),e.latitude=t.latitude}})}},onLoad:function(t){this.id=t.id,this.getGoodsInfo(),this.getLocation()},components:{infoBox:r,uniPopup:a,btn:c}};e.default=l}).call(this,n("543d")["default"])},b870:function(t,e,n){"use strict";var i=n("cdda"),o=n.n(i);o.a},cdda:function(t,e,n){},efc2:function(t,e,n){"use strict";var i={"uni-popup":()=>n.e("components/uni-popup/uni-popup").then(n.bind(null,"7c30"))},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.userInfo.destination.slice(0,10));t.$mp.data=Object.assign({},{$root:{g0:n}})},s=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return i})}},[["01ed","common/runtime","common/vendor"]]]);