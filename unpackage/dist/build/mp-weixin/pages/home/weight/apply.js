(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/weight/apply"],{"1e52":function(t,n,e){"use strict";var i={"uni-popup":()=>e.e("components/uni-popup/uni-popup").then(e.bind(null,"7c30"))},o=function(){var t=this,n=t.$createElement;t._self._c},s=[];e.d(n,"b",function(){return o}),e.d(n,"c",function(){return s}),e.d(n,"a",function(){return i})},"3b32":function(t,n,e){"use strict";e.r(n);var i=e("b5cd"),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(n,t,function(){return i[t]})}(s);n["default"]=o.a},"4b22":function(t,n,e){"use strict";(function(t){e("b05c"),e("921b");i(e("66fd"));var n=i(e("eacc"));function i(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"9e33":function(t,n,e){},b5cd:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,n,e,i,o,s,r){try{var u=t[s](r),a=u.value}catch(c){return void e(c)}u.done?n(a):Promise.resolve(a).then(i,o)}function r(t){return function(){var n=this,e=arguments;return new Promise(function(i,o){var r=t.apply(n,e);function u(t){s(r,i,o,u,a,"next",t)}function a(t){s(r,i,o,u,a,"throw",t)}u(void 0)})}}e("3fb7");var u=function(){return e.e("pages/components/boxstyle/infobox").then(e.bind(null,"e861"))},a=function(){return e.e("components/uni-popup/uni-popup").then(e.bind(null,"7c30"))},c=function(){return e.e("pages/components/pickerregion").then(e.bind(null,"67b7"))},p=function(){return e.e("pages/components/timePicker").then(e.bind(null,"1429"))},l=function(){return e.e("pages/components/boxstyle/buttonstyle").then(e.bind(null,"e270"))},f={data:function(){return{infoList:[],carList:[],carIdList:[],gotPlanList:[],planList:[],planListId:[],current:0,current1:0,current2:0,popName:"",timeList:[[],[],[],[],[]],arriveTime:"",isTure:""}},methods:{showIndex:function(t){console.log(t),0===t.length?this.current=0:this.current=t[1]},showStatus:function(t){t&&this.$refs.popup.close()},showIndex1:function(t){console.log(t),0===t.length?(console.log(1),this.current1=0):this.current1=t[1]},showStatus1:function(t){t&&this.$refs.popup2.close()},showStatus2:function(t){t&&this.$refs.popup3.close()},timeSelect:function(n){var e=this;console.log(n);var i=[];n.map(function(t,n){i.push(e.timeList[n][t])});var o=i[1]<10?"0"+i[1]:i[1],s=i[2]<10?"0"+i[2]:i[2],r=i[3]<10?"0"+i[3]:i[3],u=i[4]<10?"0"+i[4]:i[4];this.arriveTime=i[0]+"-"+o+"-"+s+" "+r+":"+u+":00",this.isTure=this.compareDate(new Date,this.arriveTime),this.isTure&&t.showModal({content:"请输入大于当前时间的预计时间"}),this.$refs.popup3.close()},compareDate:function(t,n){var e=new Date(t),i=new Date(n);return e.getTime()>i.getTime()},toChooseCar:function(){this.$refs.popup.open()},toChoosePlan:function(){this.getPlanInfo(),this.$refs.popup2.open()},toChooseTime:function(){this.$refs.popup3.open()},shouquan:function(){wx.requestSubscribeMessage({tmplIds:["P0yJj1sqB8oNODpPd5TpUA9I-qMCM-tih783bIpLZLQ"],subscription_type:"permanent",success:function(t){console.log("成功",t)},fail:function(t){console.log("失败",t)}})},getCarInfo:function(){var t=r(i.default.mark(function t(){var n,e,o=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={url:"/sc/carMng/getCanUseCars",method:"post"},t.next=3,this.$http.httpTokenRequest(n);case 3:e=t.sent,this.infoList=e.data.result,this.infoList.map(function(t,n){o.carList.push(t.carNo)}),this.infoList.map(function(t,n){o.carIdList.push(t.carId)});case 7:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),getPlanInfo:function(){var t=r(i.default.mark(function t(){var n,e,o=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={url:"/personal/driver/getTaskAppRouteList",method:"post"},t.next=3,this.$http.httpTokenRequest(n);case 3:e=t.sent,this.gotPlanList=e.data.result,this.planList=[],this.planListId=[],this.gotPlanList.map(function(t,n){o.planList.push(t.routeName)}),this.gotPlanList.map(function(t,n){o.planListId.push(t.id)});case 9:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),initTime:function(){var t=this,n=new Date,e=n.getFullYear();n.getMonth(),n.getDate(),n.getHours(),n.getMinutes();new Array(10).fill(e).map(function(n,e){t.timeList[0].push(n-5+e)}),new Array(12).fill("").map(function(n,e){t.timeList[1].push(e+1)}),new Array(31).fill("").map(function(n,e){t.timeList[2].push(e+1)}),new Array(24).fill("").map(function(n,e){t.timeList[3].push(e+1)}),new Array(60).fill("").map(function(n,e){t.timeList[4].push(e+1)}),console.log(this.timeList)},submitApply:function(){var n=r(i.default.mark(function n(){var e,o,s;return i.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!this.isTure){n.next=4;break}t.showModal({content:"请输入大于当前时间的预计时间"}),n.next=12;break;case 4:return e={carId:this.carIdList[this.current],carNo:this.carList[this.current],destination:this.planList[this.current1],estimatedTime:this.arriveTime,routeId:this.planListId[this.current1]},o={url:"/personal/driver/modTaskAppRoute",method:"post"},n.next=8,this.$http.httpTokenRequest(o,e);case 8:s=n.sent,console.log(s),0===s.data.code&&(this.shouquan(),t.navigateBack({delta:1})),1===s.data.code&&t.showModal({title:s.data.desc,icon:"none"});case 12:case"end":return n.stop()}},n,this)}));function e(){return n.apply(this,arguments)}return e}()},onLoad:function(){this.getCarInfo(),this.initTime(),console.log(this.timeList)},components:{infoBox:u,uniPopup:a,pickerRegion:c,btn:l,timePicker:p}};n.default=f}).call(this,e("543d")["default"])},d167:function(t,n,e){"use strict";var i=e("9e33"),o=e.n(i);o.a},eacc:function(t,n,e){"use strict";e.r(n);var i=e("1e52"),o=e("3b32");for(var s in o)"default"!==s&&function(t){e.d(n,t,function(){return o[t]})}(s);e("d167");var r,u=e("f0c5"),a=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"a90a30ac",null,!1,i["a"],r);n["default"]=a.exports}},[["4b22","common/runtime","common/vendor"]]]);